<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profil | ft_transcendence</title>
    <link rel="stylesheet" href="./style_profil.css" />
</head>
<body>
    <main class="landing profile-page">
        <a class="nav-link bottom-left" href="index.html">return</a>
        <div id="pingpong-rain" aria-hidden="true"></div>
        <section class="profile-hero">
            <svg class="profile-arc" viewBox="0 0 500 240" role="img" aria-hidden="true">
                <defs>
                    <path id="arc-text" d="M 40 210 A 210 210 0 0 1 460 210" />
                </defs>
                <text>
                    <textPath href="#arc-text" startOffset="50%" text-anchor="middle">WELCOME BEAUGOSS</textPath>
                </text>
            </svg>
            <h1 class="profile-title">User Profile</h1>
        </section>

        <div id="cloud-bg" aria-label="Message du jour">
            <img src="perso_color/cloud.png" alt="" aria-hidden="true">
            <div id="cloud-message">
                <p class="cloud-text">Petit bio t'as capte</p>
                <p class="cloud-text">Stats: 12 games • 1 victoire • 11 défaites</p>

            </div>
        </div>
        
        <!-- Espace pour les personnages -->
        <div id="personnage-container">
            <img id="personnage-img" src="" alt="Personnage">
        </div>
		<img id="podium" src="perso_color/podium.png" alt="Podium">
    </main>

    <script>
        const personnages = [
            'perso_color/perso_1.png',
            'perso_color/perso_2.png',
            'perso_color/perso_3.png',
            'perso_color/perso_4.png',
            'perso_color/perso_5.png',
            'perso_color/perso_6.png',
            'perso_color/perso_7.png',
            'perso_color/perso_8.png',
            'perso_color/perso_9.png',
            'perso_color/perso_10.png',
            'perso_color/perso_11.png',
            'perso_color/perso_12.png',
            'perso_color/perso_13.png',
            'perso_color/perso_14.png',
            'perso_color/perso_15.png',
            'perso_color/perso_16.png',
            'perso_color/perso_17.png',
            'perso_color/perso_18.png',
            'perso_color/perso_19.png',
            'perso_color/perso_20.png',
			'perso_color/perso_21.png',
            'perso_color/perso_22.png',
            'perso_color/perso_23.png',
            'perso_color/perso_24.png',
            'perso_color/perso_25.png',
            'perso_color/perso_26.png'
        ];

        const personnageAleatoire = personnages[Math.floor(Math.random() * personnages.length)];
        
        document.getElementById('personnage-img').src = personnageAleatoire;

        const rainLayer = document.getElementById('pingpong-rain');
        const ballImage = 'perso_color/pingpong.png';
        const minDurationMs = 15000;
        const maxDurationMs = 30000;
        const rainDurationMs = Math.floor(minDurationMs + Math.random() * (maxDurationMs - minDurationMs));
        const rainEndsAt = performance.now() + rainDurationMs;

        const spawnBall = () => {
            const ball = document.createElement('img');
            const size = Math.floor(28 + Math.random() * 41);
            const duration = (3.8 + Math.random() * 3.5).toFixed(2);
            const delay = (Math.random() * 0.6).toFixed(2);
            const bounceClass = Math.random() > 0.5 ? 'is-three' : 'is-four';
            const maxX = Math.max(0, window.innerWidth - size);
            const x = Math.floor(Math.random() * maxX);

            ball.src = ballImage;
            ball.alt = '';
            ball.className = `pingpong-ball ${bounceClass}`;
            ball.style.left = `${x}px`;
            ball.style.setProperty('--size', `${size}px`);
            ball.style.setProperty('--duration', `${duration}s`);
            ball.style.setProperty('--delay', `${delay}s`);

            ball.addEventListener('animationend', () => {
                ball.remove();
            });

            rainLayer.appendChild(ball);
        };

        const spawnLoop = () => {
            if (performance.now() > rainEndsAt) {
                return;
            }
            spawnBall();
            const nextIn = Math.floor(100 + Math.random() * 260);
            window.setTimeout(spawnLoop, nextIn);
        };

        spawnLoop();
    </script>
</body>
</html>
